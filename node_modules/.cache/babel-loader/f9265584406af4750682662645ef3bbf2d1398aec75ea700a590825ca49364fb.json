{"ast":null,"code":"import _slicedToArray from\"C:/Users/ADMIN/Desktop/gmail-clone-using-electron/frontend-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Navbar from'./Navbar';import Sidebar from'./Sidebar';import axios from'axios';import Snackbar from'@mui/material/Snackbar';import IconButton from'@mui/material/IconButton';import CloseIcon from'@mui/icons-material/Close';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TrashEmails(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allEmails=_useState2[0],setAllEmails=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),popupMessage=_useState6[0],setPopupMessage=_useState6[1];var userEmail=sessionStorage.getItem('userEmail');// useEffect(() => {\naxios.get(\"https://gmail-clone-email-be.onrender.com/getEmails/\".concat(userEmail)).then(function(response){setAllEmails(response.data);}).catch(function(error){console.log(error);});// }, [setAllEmails, userEmail])\nvar trashEmails=allEmails.length?allEmails.filter(function(e){return e.trash===true;}):'';var handleClick=function handleClick(){setOpen(true);};var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpen(false);};var action=/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",\"aria-label\":\"close\",color:\"inherit\",onClick:handleClose,children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"})})});function moveToInboxClick(email){var sendingEmailToInbox={read:false,trash:false};axios.put(\"https://gmail-clone-email-be.onrender.com/updateEmailInfo/\".concat(email._id),sendingEmailToInbox).then(function(response){setPopupMessage('Email moved to inbox');handleClick();}).catch(function(error){console.log(error);});}function emptyTrashNow(){if(trashEmails.length!==0){axios.delete(\"https://gmail-clone-email-be.onrender.com/deleteAllTrashEmails/\".concat(userEmail)).then(function(response){setPopupMessage('All trash emails deleted successfully');handleClick();}).catch(function(error){console.log(error);});}else{setPopupMessage('No trash emails found');handleClick();}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'30px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"col border border-dark rounded\",style:{minHeight:'600px',marginRight:'40px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fs-5 fa-solid fa-arrow-rotate-right icon\",title:\"Refresh\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-direction-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mt-2\",children:\"Trash Emails\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ms-5 icon\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm border-danger text-danger mt-1\",onClick:function onClick(){emptyTrashNow();},children:\"Empty trash now\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{maxHeight:\"500px\",overflowY:'auto'},children:trashEmails.length?trashEmails.map(function(e,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3 mb-1 p-1 unreadMail rounded-3\",style:{marginLeft:'1px',marginRight:'1px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col icon\",style:{maxWidth:'100%',overflow:'auto'},children:[/*#__PURE__*/_jsx(\"span\",{children:e.emailSubject}),\" \",/*#__PURE__*/_jsx(\"span\",{children:e.emailBody})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 \",children:/*#__PURE__*/_jsx(\"i\",{className:\"fs-5 fa-solid fa-trash-arrow-up icon delete\",title:\"Move to Inbox\",onClick:function onClick(){moveToInboxClick(e);}})})]},i);}):\"\"})]})]})}),/*#__PURE__*/_jsx(Snackbar,{open:open,autoHideDuration:3000,onClose:handleClose,message:popupMessage,action:action})]});}export default TrashEmails;","map":{"version":3,"names":["React","useState","Navbar","Sidebar","axios","Snackbar","IconButton","CloseIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TrashEmails","_useState","_useState2","_slicedToArray","allEmails","setAllEmails","_useState3","_useState4","open","setOpen","_useState5","_useState6","popupMessage","setPopupMessage","userEmail","sessionStorage","getItem","get","concat","then","response","data","catch","error","console","log","trashEmails","length","filter","e","trash","handleClick","handleClose","event","reason","action","children","size","color","onClick","fontSize","moveToInboxClick","email","sendingEmailToInbox","read","put","_id","emptyTrashNow","delete","style","marginTop","className","minHeight","marginRight","title","maxHeight","overflowY","map","i","marginLeft","maxWidth","overflow","emailSubject","emailBody","autoHideDuration","onClose","message"],"sources":["C:/Users/ADMIN/Desktop/gmail-clone-using-electron/frontend-main/src/components/Home/TrashEmails.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport Navbar from './Navbar'\r\nimport Sidebar from './Sidebar'\r\nimport axios from 'axios'\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\nfunction TrashEmails() {\r\n    let [allEmails, setAllEmails] = useState([])\r\n    let [open, setOpen] = useState(false)\r\n    let [popupMessage, setPopupMessage] = useState('')\r\n    const userEmail = sessionStorage.getItem('userEmail');\r\n\r\n    // useEffect(() => {\r\n        axios.get(`https://gmail-clone-email-be.onrender.com/getEmails/${userEmail}`)\r\n            .then((response) => {\r\n                setAllEmails(response.data)\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            })\r\n    // }, [setAllEmails, userEmail])\r\n\r\n    let trashEmails = allEmails.length ? allEmails.filter((e) => e.trash === true) : ''\r\n\r\n    const handleClick = () => {\r\n        setOpen(true);\r\n    };\r\n    const handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n    };\r\n    const action = (\r\n        <React.Fragment>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n                <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n        </React.Fragment>\r\n    );\r\n\r\n    function moveToInboxClick(email) {\r\n        let sendingEmailToInbox = {\r\n            read: false,\r\n            trash: false\r\n        }\r\n        axios.put(`https://gmail-clone-email-be.onrender.com/updateEmailInfo/${email._id}`, sendingEmailToInbox)\r\n            .then((response) => {\r\n                setPopupMessage('Email moved to inbox')\r\n                handleClick()\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    function emptyTrashNow() {\r\n        if (trashEmails.length !== 0) {\r\n            axios.delete(`https://gmail-clone-email-be.onrender.com/deleteAllTrashEmails/${userEmail}`)\r\n                .then((response) => {\r\n                    setPopupMessage('All trash emails deleted successfully')\r\n                    handleClick()\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                })\r\n        }\r\n        else {\r\n            setPopupMessage('No trash emails found')\r\n            handleClick()\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div style={{ marginTop: '30px' }}>\r\n                <div className='row'>\r\n                    <Sidebar />\r\n                    <div className='col border border-dark rounded' style={{ minHeight: '600px', marginRight: '40px' }}>\r\n                        <div className='mt-2'>\r\n                            <i className=\"fs-5 fa-solid fa-arrow-rotate-right icon\" title='Refresh'></i>\r\n                        </div>\r\n                        <div className='d-flex flex-direction-row'>\r\n                            <div>\r\n                                <h5 className='mt-2'>Trash Emails</h5>\r\n                            </div>\r\n                            <div className='ms-5 icon'>\r\n                                <button className='btn btn-sm border-danger text-danger mt-1' onClick={() => { emptyTrashNow() }}>Empty trash now</button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"\" style={{ maxHeight: \"500px\", overflowY: 'auto' }}>\r\n                            {\r\n                                trashEmails.length ? trashEmails.map((e, i) => {\r\n                                    return (\r\n                                        <div key={i} className=\"row mt-3 mb-1 p-1 unreadMail rounded-3\" style={{ marginLeft: '1px', marginRight: '1px' }} >\r\n                                            <div className='col icon' style={{ maxWidth: '100%', overflow: 'auto' }}  >\r\n                                                <span>{e.emailSubject}</span> <span>{e.emailBody}</span>\r\n                                            </div>\r\n                                            <div className='col-1 '>\r\n                                                <i className=\"fs-5 fa-solid fa-trash-arrow-up icon delete\" title='Move to Inbox' onClick={() => { moveToInboxClick(e) }}></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                }) : \"\"\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Snackbar open={open} autoHideDuration={3000} onClose={handleClose} message={popupMessage} action={action} />\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TrashEmails"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}